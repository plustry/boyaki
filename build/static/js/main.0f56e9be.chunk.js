(this.webpackJsonpboyaki=this.webpackJsonpboyaki||[]).push([[0],{163:function(t,e,n){},164:function(t,e,n){},283:function(t,e,n){"use strict";n.r(e);var a=n(7),i=n(0),r=n.n(i),o=n(15),s=n.n(o),c=(n(163),n(164),n(143)),l=n(142),u=n(27),d=n(144),p=n(313),j=n(328),b=n(329),h=n(46),m=n.n(h),f=n(52),O=n(24),x=n(20),g=n(17),y="\n  query ListPostsSortedByTimestamp(\n    $type: String\n    $timestamp: ModelIntKeyConditionInput\n    $sortDirection: ModelSortDirection\n    $filter: ModelPostFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listPostsSortedByTimestamp(\n      type: $type\n      timestamp: $timestamp\n      sortDirection: $sortDirection\n      filter: $filter\n      limit: $limit\n      nextToken: $nextToken\n    ) {\n      items {\n        type\n        id\n        content\n        owner\n        timestamp\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",w="\n  query ListPostsBySpecificOwner(\n    $owner: String\n    $timestamp: ModelIntKeyConditionInput\n    $sortDirection: ModelSortDirection\n    $filter: ModelPostFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listPostsBySpecificOwner(\n      owner: $owner\n      timestamp: $timestamp\n      sortDirection: $sortDirection\n      filter: $filter\n      limit: $limit\n      nextToken: $nextToken\n    ) {\n      items {\n        type\n        id\n        content\n        owner\n        timestamp\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",v="\n  subscription OnCreatePost {\n    onCreatePost {\n      type\n      id\n      content\n      owner\n      timestamp\n      createdAt\n      updatedAt\n    }\n  }\n",_=n(316),k=n(318),I=n(319),T=n(79),S=n(320),C=n(321),P=n(322),A=n(323),$=n(333),B=n(92),D=n.n(B),L=Object(p.a)((function(t){return{listRoot:{width:"100%",wordBreak:"break-all",overflow:"scroll",borderRight:"1px solid #37444C"},alignCenter:{textAlign:"center"},loader:{textAlign:"center",paddingTop:20},maxWidth:{width:"100%"},listHeader:{position:"sticky",top:0,zIndex:1200,backgroundColor:"#15202B",borderBottom:"1px solid #37444C"},clickable:{cursor:"pointer"}}}));function N(t){var e=t.isLoading,n=t.posts,i=t.getAdditionalPosts,r=t.listHeaderTitle,o=t.listHeaderTitleButton,s=L();return Object(a.jsx)("div",{className:s.listRoot,children:e?Object(a.jsx)("div",{className:s.loader,children:Object(a.jsx)(_.a,{size:25})}):Object(a.jsxs)(k.a,{disablePadding:!0,children:[Object(a.jsx)(I.a,{alignItems:"flex-start",className:s.listHeader,children:Object(a.jsxs)(T.a,{variant:"h5",fontWeight:"fontWeightBold",maxWidth:!0,children:[r,o&&o]})}),n.map((function(t){return Object(a.jsxs)("span",{children:[Object(a.jsx)(R,{post:t}),Object(a.jsx)(S.a,{component:"li"})]})})),Object(a.jsx)(I.a,{alignItems:"flex-start",className:s.alignCenter,children:Object(a.jsx)(C.a,{primary:Object(a.jsx)(P.a,{variant:"outlined",onClick:function(){return i()},className:s.maxWidth,children:" Read More "})})},"loadmore")]})})}function R(t){var e=t.post,n=L(),i=Object(u.g)(),o=D()();console.log(o);return Object(a.jsxs)(I.a,{alignItems:"flex-start",children:[Object(a.jsx)(A.a,{children:Object(a.jsx)("div",{className:n.clickable,onClick:function(){return i.push("/"+e.owner)},children:Object(a.jsx)($.a,{alt:e.owner,src:"/"})})}),Object(a.jsx)(C.a,{primary:Object(a.jsxs)(r.a.Fragment,{children:[e.owner,Object(a.jsx)(T.a,{color:"textSecondary",display:"inline",children:" "+String.fromCharCode(183)+" "+function(t){for(var e=["years","months","weeks","days","hours","minutes","seconds"],n=0;n<e.length;n++){var a=e[n],i=D()(o).diff(1e3*t,a);if(i>0)return i+a.charAt(0)}return 0+e[e.length-1].charAt(0)}(e.timestamp)})]}),secondary:Object(a.jsx)(T.a,{color:"textPrimary",children:e.content})})]},e.id)}var M=n(332),E=n(325),F=n(330),q=n(326),U=n(327),W=n(3),H=Object(p.a)((function(t){return{drawer:{width:340,flexShrink:0,position:"relative"},drawerPaper:{width:340,position:"relative"},toolbar:t.mixins.toolbar,textField:{width:340},list:{width:300}}}));function G(t){var e=t.activeListItem,n=H(),i=Object(u.g)(),o=r.a.useState(""),s=Object(O.a)(o,2),c=s[0],l=s[1],d=r.a.useState(!1),p=Object(O.a)(d,2),j=p[0],b=p[1],h=r.a.useState(""),x=Object(O.a)(h,2),y=x[0],w=x[1],v=function(){var t=Object(f.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.graphql(Object(g.b)("\n  mutation CreatePost(\n    $input: CreatePostInput!\n    $condition: ModelPostConditionInput\n  ) {\n    createPost(input: $input, condition: $condition) {\n      type\n      id\n      content\n      owner\n      timestamp\n      createdAt\n      updatedAt\n    }\n  }\n",{input:{type:"post",content:c,timestamp:Math.floor(Date.now()/1e3)}}));case 2:e=t.sent,console.log(e),l("");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)(M.a,{className:n.drawer,variant:"permanent",classes:{paper:n.drawerPaper},anchor:"left",children:[Object(a.jsx)("div",{className:n.toolbar}),Object(a.jsxs)(k.a,{children:[Object(a.jsxs)(I.a,{button:!0,selected:"global-timeline"===e,onClick:function(){W.a.currentAuthenticatedUser().then((function(t){i.push("/global-timeline")}))},children:[Object(a.jsx)(E.a,{children:Object(a.jsx)(q.a,{})}),Object(a.jsx)(C.a,{primary:"Global Timeline"})]},"global-timeline"),Object(a.jsxs)(I.a,{button:!0,selected:"profile"===e,onClick:function(){W.a.currentAuthenticatedUser().then((function(t){i.push("/"+t.username)}))},children:[Object(a.jsx)(E.a,{children:Object(a.jsx)(U.a,{})}),Object(a.jsx)(C.a,{primary:"Profile"})]},"profile"),Object(a.jsx)(I.a,{children:Object(a.jsx)(C.a,{primary:Object(a.jsx)(F.a,{error:j,helperText:y,id:"post-input",label:"Type your post!",multiline:!0,rowsMax:"8",variant:"filled",value:c,onChange:function(t){l(t.target.value),t.target.value.length>140?(b(!0),w(140-t.target.value.length)):(b(!1),w(""))},fullWidth:!0,margin:"normal"})})},"post-input-field"),Object(a.jsx)(I.a,{children:Object(a.jsx)(C.a,{primary:Object(a.jsx)(P.a,{variant:"contained",color:"primary",disabled:j,onClick:v,fullWidth:!0,children:"Post"})})},"post-button"),Object(a.jsx)(I.a,{children:Object(a.jsx)(C.a,{primary:Object(a.jsx)(P.a,{variant:"outlined",onClick:function(){W.a.signOut().then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))},fullWidth:!0,children:"Logout"})})},"logout")]})]})}var Q="SUBSCRIPTION",K="INITIAL_QUERY",Y="ADDITIONAL_QUERY",z=function(t,e){switch(e.type){case K:return e.posts;case Y:return[].concat(Object(x.a)(t),Object(x.a)(e.posts));case Q:return[e.post].concat(Object(x.a)(t));default:return t}};function J(){var t=Object(i.useReducer)(z,[]),e=Object(O.a)(t,2),n=e[0],o=e[1],s=Object(i.useState)(null),c=Object(O.a)(s,2),l=c[0],u=c[1],d=Object(i.useState)(!0),p=Object(O.a)(d,2),j=p[0],b=p[1],h=function(){var t=Object(f.a)(m.a.mark((function t(e){var n,a,i=arguments;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:null,t.next=3,g.a.graphql(Object(g.b)(y,{type:"post",sortDirection:"DESC",limit:20,nextToken:n}));case 3:a=t.sent,console.log(a),o({type:e,posts:a.data.listPostsSortedByTimestamp.items}),u(a.data.listPostsSortedByTimestamp.nextToken),b(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){h(K);var t=g.a.graphql(Object(g.b)(v)).subscribe({next:function(t){console.log("allposts subscription fired");var e=t.value.data.onCreatePost;o({type:Q,post:e})}});return function(){return t.unsubscribe()}}),[]),Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(G,{activeListItem:"global-timeline"}),Object(a.jsx)(N,{isLoading:j,posts:n,getAdditionalPosts:function(){null!==l&&h(Y,l)},listHeaderTitle:"Global Timeline"})]})}var X="SUBSCRIPTION",Z="INITIAL_QUERY",V="ADDITIONAL_QUERY",tt=function(t,e){switch(e.type){case Z:return e.posts;case V:return[].concat(Object(x.a)(t),Object(x.a)(e.posts));case X:return[e.post].concat(Object(x.a)(t));default:return t}};function et(){var t=Object(u.h)().userId,e=Object(i.useReducer)(tt,[]),n=Object(O.a)(e,2),o=n[0],s=n[1],c=Object(i.useState)(null),l=Object(O.a)(c,2),d=l[0],p=l[1],j=Object(i.useState)(!0),b=Object(O.a)(j,2),h=b[0],x=b[1],y=function(){var e=Object(f.a)(m.a.mark((function e(n){var a,i,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:null,e.next=3,g.a.graphql(Object(g.b)(w,{owner:t,sortDirection:"DESC",limit:20,nextToken:a}));case 3:i=e.sent,console.log(i),s({type:n,posts:i.data.listPostsBySpecificOwner.items}),p(i.data.listPostsBySpecificOwner.nextToken),x(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y(Z);var e=g.a.graphql(Object(g.b)(v)).subscribe({next:function(e){var n=e.value.data.onCreatePost;n.owner===t&&s({type:X,post:n})}});return function(){return e.unsubscribe()}}),[]),Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(G,{activeListItem:"profile"}),Object(a.jsx)(N,{isLoading:h,posts:o,getAdditionalPosts:function(){null!==d&&y(V,d)},listHeaderTitle:t})]})}var nt=n(1),at=n(145),it={aws_project_region:"us-east-1",aws_cognito_identity_pool_id:"us-east-1:5e747d12-5bd4-48d0-b8bb-8708681af717",aws_cognito_region:"us-east-1",aws_user_pools_id:"us-east-1_h4KyjGXQh",aws_user_pools_web_client_id:"71nd10lhtb6e395kb2mqtlp6l5",oauth:{},aws_appsync_graphqlEndpoint:"http://192.168.50.77:20002/graphql",aws_appsync_region:"us-east-1",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_appsync_apiKey:"da2-fakeApiId123456",aws_appsync_dangerously_connect_to_http_endpoint_for_testing:!0};nt.r.configure(it),at.b.configure(it);var rt=Object(d.a)({palette:{type:"dark",primary:{main:"#1EA1F2",contrastText:"#fff"},background:{default:"#15202B",paper:"#15202B"},divider:"#37444C"},overrides:{MuiButton:{color:"white"}},typography:{fontFamily:["Arial"].join(",")},status:{danger:"orange"}}),ot=Object(p.a)((function(t){return{root:{display:"flex",height:"100%",width:800,marginLeft:"auto",marginRight:"auto"},appBar:{marginLeft:240},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},toolbar:t.mixins.toolbar,content:{flexGrow:1,backgroundColor:t.palette.background.default,padding:t.spacing(3)}}}));var st=Object(c.a)((function(){var t=ot();return Object(a.jsx)("div",{className:t.root,children:Object(a.jsxs)(j.a,{theme:rt,children:[Object(a.jsx)(b.a,{}),Object(a.jsx)(l.a,{children:Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{exact:!0,path:"/",component:J}),Object(a.jsx)(u.b,{exact:!0,path:"/global-timeline",component:J}),Object(a.jsx)(u.b,{exact:!0,path:"/:userId",component:et}),Object(a.jsx)(u.a,{path:"*",to:"/"})]})})]})})}),{signUpConfig:{hiddenDefaults:["phone_number"]}}),ct=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,335)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),i(t),r(t),o(t)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(st,{})}),document.getElementById("root")),ct()},88:function(t,e){}},[[283,1,2]]]);
//# sourceMappingURL=main.0f56e9be.chunk.js.map